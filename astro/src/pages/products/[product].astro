---
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const res = await fetch('https://fakestoreapi.com/products');
  const products = await res.json();

  return products.map((product) => {
    return {
      params: { product: String(product.id) }, // Ensure this matches the file name
    };
  });
}

// Use the correct parameter name from the URL
const productId = Astro.params.product;
const res = await fetch(`https://fakestoreapi.com/products/${productId}`);
const productData = await res.json();
---

<Layout title={productData.title}>
  <h1>{productData.title}</h1>
  <img src={productData.image} alt={productData.title} />
  <p>{productData.description}</p>
  <p>Price: ${productData.price}</p>
  <!-- More product details here -->
</Layout>
